from django.shortcuts import reverse
from django.views.generic import TemplateView, ListView, UpdateView, DeleteView

from .forms import StyleForm, StyleEditForm
from .models import Style

class StylistIndexView(ListView):
    """
    List of styles available for editing
    """
    template_name = "stylist/index.html"
    model = Style

    def get_context_data(self, *args, **kwargs):
        context = super().get_context_data()
        context["form"] = StyleForm
        return context


# Stylist Preview Link - Autogenerated CSS from SASS/SCSS


# Stylist Edit Page
class StylistUpdateView(UpdateView):
    model = Style
    form_class = StyleEditForm

    def get_object(self, *args, **kwargs):
        return Style.objects.get(uuid=self.kwargs.get("uuid"))


# Stylist Detail Page


class StylistDeleteView(DeleteView):
    model = Style
    template_name = 'stylist/style_delete.html'

    def get_object(self, queryset=None):
        return Style.objects.get(uuid=self.kwargs.get("uuid"))

    def get_success_url(self):
        return reverse('stylist:stylist-index')
